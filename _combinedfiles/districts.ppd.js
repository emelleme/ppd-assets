/****** FILE: themes/v3/js/custom.js *****/

jQuery('.back-to-top a').click(function(){jQuery('html, body').animate({scrollTop:0},300);return false;});$(document).ready(function(){try{$(document).pngFix();}catch(e){}
$('.stats-link').on('click',function(e){e.preventDefault();$('#modalFrame').attr('src',$(this).data('link'));$('#videoModal').modal('show');});$('#content a').each(function(){if($(this).has('img').length===0){var linkHostname=$(this).get(0).hostname;if(linkHostname!==window.location.hostname&&linkHostname!=='blog.phillypolice.com'&&linkHostname!=='safecam.phillypolice.com'&&linkHostname!==''){$(this).attr('target','_blank');$(this).append(' <i class="icon-external-link"></i> ');}}});$('#gmap-resizer').click(function(){var $googleMap=$('.google-map-full');var currHeight=$googleMap.height();var nextHeight=currHeight===300?450:300;$googleMap.css('height',nextHeight+'px');$('html, body').animate({scrollTop:$("#googlemaps-container-top").offset().top},1000);});$('#cmap-resizer').click(function(){var $googleMap=$('.google-map-full');var currHeight=$googleMap.height();var nextHeight=currHeight===400?600:400;$googleMap.css('height',nextHeight+'px');$('html, body').animate({scrollTop:$("#googlemaps-container-top").offset().top},1000);});var aboutPhotoShown=false;$('#about-photo').addClass('fadable');$('#hero-headline, #hero-twitter').addClass('fadable');$('#show-about-photo').click(function(){var desc=$('.bg-home').attr('data-desc');var title=$('.bg-home').attr('alt');$('#about-photo p').text(desc);$('#about-photo h2').text(title);if(aboutPhotoShown){$('#hero-headline, #hero-twitter').removeClass('fade_out');$('#hero-headline, #hero-twitter').addClass('fade_in');$('#about-photo').removeClass('fade_in');$('#about-photo').addClass('fade_out');$('#show-about-photo').text('About this Photo');}else{$('#hero-headline, #hero-twitter').removeClass('fade_in');$('#hero-headline, #hero-twitter').addClass('fade_out');$('#about-photo').removeClass('fade_out');$('#about-photo').addClass('fade_in');$('#show-about-photo').text('Close');}
aboutPhotoShown=!aboutPhotoShown;});var cursorShown=false;setInterval(function(){if($('#display-search').val()!==''){$('#display-search').css('border-left','0px solid');cursorShown=false;return;}
if(cursorShown)$('#display-search').css('border-left','0px solid');else $('#display-search').css('border-left','1px solid');cursorShown=!cursorShown;},500);$('#hidden-search').bind('keyup',function(){if($('#hidden-search').val()!==''){$('#display-search').css('border-left','0px solid');cursorShown=false;}});$('.contact-checkbox').change(function(){if(!$(this).is(':checked')){$('.contact-section-toggle').hide();}else{$('.contact-section-toggle').show();}});$('#drivers-license-option').change(function(){if(!$(this).is(':checked')){$('#drivers-license-identification').hide();$('#email-phone-identification').show();}else{$('#drivers-license-identification').show();$('#email-phone-identification').hide();}});$('#email-phone-option').change(function(){if(!$(this).is(':checked')){$('#email-phone-identification').hide();$('#drivers-license-identification').show();}else{$('#email-phone-identification').show();$('#drivers-license-identification').hide();}});$('#num-contacts-for-bond').bind('change',function(){$('#contact-blocks .contact-block').hide();var valueSelected=this.value;var blocksToShow=$('#contact-blocks .contact-block');for(var i=0;i<valueSelected;i++){blocksToShow.eq(i).show();}});$("#alarm-option input:radio[name=label-choice]").click(function(){$('#alarm-details').hide();var value=$(this).val();if(value==='yes'){$('#alarm-details').show();}});if(document.getElementById('current-date')!==null){var fullMonthMapping={Jan:'January',Feb:'February',Mar:'March',Apr:'April',May:'May',Jun:'June',Jul:'July',Aug:'August',Sep:'September',Oct:'October',Nov:'November',Dec:'December'}
var parts=new Date().toString().split(' ');var formattedDate=fullMonthMapping[parts[1]]+' '+parts[2]+', '+parts[3];$('#current-date').val(formattedDate);}
$('.expand-form').bind('click',function(){var currentText=$(this).text();var idToExpand='#'+$(this).attr('data-expand-id');if($(idToExpand).css('display')=='none'){$(idToExpand).show();$(this).text(currentText.replace("Add","").trim());}else{$(idToExpand).hide();$(this).text('Add '+currentText);}
return false;});var numWitnesses=1;$('#add-witness-block').bind('click',function(){if(numWitnesses<=2){numWitnesses++;var blockToAdd=$(this).prev().clone();blockToAdd.find('h5').text('Witness '+numWitnesses);blockToAdd.find('input').val('');blockToAdd.find('select').prop('selectedIndex',0);blockToAdd.find('input').each(function(index,ele){var name=$(ele).attr('name');var newName='witness'+numWitnesses+'_'+name.split('_').splice(1,100).join('_');$(ele).attr('name',newName);});blockToAdd.find('select').each(function(index,ele){var name=$(ele).attr('name');var newName='witness'+numWitnesses+'_'+name.split('_').splice(1,100).join('_');$(ele).attr('name',newName);});$(this).before(blockToAdd);}
if(numWitnesses==3){$('#add-witness-block').hide();}
return false;});$('#add-second-officer').bind('click',function(){$('#second-officer-block').show();$('#add-second-officer').hide();return false;});$('#officer-2-heading').bind('click',function(){$('#second-officer-block').hide();$('#add-second-officer').show();return false;});$(document).ready(function(){$(".flickr-widget a").attr('target','_blank');});});;

/****** FILE: themes/v3/js/bootstrap.min.js *****/
!function(a){a(function(){a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!b)return;e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){function d(){a(b).each(function(){e(a(this)).removeClass("open")})}function e(b){var c=b.attr("data-target"),d;c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c);if(!d||!d.length)d=b.parent();return d}var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||f.toggleClass("open"),c.focus(),!1},keydown:function(c){var d,f,g,h,i,j;if(!/(38|40|27)/.test(c.keyCode))return;d=a(this),c.preventDefault(),c.stopPropagation();if(d.is(".disabled, :disabled"))return;h=e(d),i=h.hasClass("open");if(!i||i&&c.keyCode==27)return c.which==27&&h.find(b).focus(),d.click();f=a("[role=menu] li:not(.divider):visible a",h);if(!f.length)return;j=f.index(f.filter(":focus")),c.keyCode==38&&j>0&&j--,c.keyCode==40&&j<f.length-1&&j++,~j||(j=0),f.eq(j).focus()}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var c=a(this),d=c.data("target")||c.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" ");for(i=g.length;i--;)h=g[i],h=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):h!="manual"&&(e=h=="hover"?"mouseenter":"focus",f=h=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a.fn[this.type].defaults,d={},e;this._options&&a.each(this._options,function(a,b){c[a]!=b&&(d[a]=b)},this),e=a(b.currentTarget)[this.type](d).data(this.type);if(!e.options.delay||!e.options.delay.show)return e.show();clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){e.hoverState=="in"&&e.show()},e.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(h);if(h.isDefaultPrevented())return;b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight;switch(f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c=this.tip(),d=c[0].offsetWidth,e=c[0].offsetHeight,f,g,h,i;c.offset(a).addClass(b).addClass("in"),f=c[0].offsetWidth,g=c[0].offsetHeight,b=="top"&&g!=e&&(a.top=a.top+e-g,i=!0),b=="bottom"||b=="top"?(h=0,a.left<0&&(h=a.left*-2,a.left=0,c.offset(a),f=c[0].offsetWidth,g=c[0].offsetHeight),this.replaceArrow(h-d+f,f,"left")):this.replaceArrow(g-e,g,"top"),i&&c.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function e(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var b=this,c=this.tip(),d=a.Event("hide");this.$element.trigger(d);if(d.isDefaultPrevented())return;return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?e():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},typeof b.getBoundingClientRect=="function"?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=(typeof c.content=="function"?c.content.call(b[0]):c.content)||b.attr("data-content"),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning||this.$element.hasClass("in"))return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning||!this.$element.hasClass("in"))return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),typeof c=="object"&&c);e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(b>this.$items.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j;this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),j=a.Event("slide",{relatedTarget:e[0],direction:g});if(e.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")}));if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g;e.carousel(f),(g=c.attr("data-slide-to"))&&e.data("carousel").pause().to(g).cycle(),b.preventDefault()})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b=typeof this.$element[a]=="function"),b},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;c.typeahead(c.data())})}(window.jQuery);

/****** FILE: themes/v3/js/markermanager.js *****/

function MarkerManager(map,opt_opts){var me=this;me.map_=map;me.mapZoom_=map.getZoom();me.projectionHelper_=new ProjectionHelperOverlay(map);google.maps.event.addListener(me.projectionHelper_,'ready',function(){me.projection_=this.getProjection();me.initialize(map,opt_opts);});}
MarkerManager.prototype.initialize=function(map,opt_opts){var me=this;opt_opts=opt_opts||{};me.tileSize_=MarkerManager.DEFAULT_TILE_SIZE_;var mapTypes=map.mapTypes;var mapMaxZoom=1;for(var sType in mapTypes){if(typeof map.mapTypes.get(sType)==='object'&&typeof map.mapTypes.get(sType).maxZoom==='number'){var mapTypeMaxZoom=map.mapTypes.get(sType).maxZoom;if(mapTypeMaxZoom>mapMaxZoom){mapMaxZoom=mapTypeMaxZoom;}}}
me.maxZoom_=opt_opts.maxZoom||19;me.trackMarkers_=opt_opts.trackMarkers;me.show_=opt_opts.show||true;var padding;if(typeof opt_opts.borderPadding==='number'){padding=opt_opts.borderPadding;}else{padding=MarkerManager.DEFAULT_BORDER_PADDING_;}
me.swPadding_=new google.maps.Size(-padding,padding);me.nePadding_=new google.maps.Size(padding,-padding);me.borderPadding_=padding;me.gridWidth_={};me.grid_={};me.grid_[me.maxZoom_]={};me.numMarkers_={};me.numMarkers_[me.maxZoom_]=0;google.maps.event.addListener(map,'dragend',function(){me.onMapMoveEnd_();});google.maps.event.addListener(map,'idle',function(){me.onMapMoveEnd_();});google.maps.event.addListener(map,'zoom_changed',function(){me.onMapMoveEnd_();});me.removeOverlay_=function(marker){marker.setMap(null);me.shownMarkers_--;};me.addOverlay_=function(marker){if(me.show_){marker.setMap(me.map_);me.shownMarkers_++;}};me.resetManager_();me.shownMarkers_=0;me.shownBounds_=me.getMapGridBounds_();google.maps.event.trigger(me,'loaded');};MarkerManager.DEFAULT_TILE_SIZE_=1024;MarkerManager.DEFAULT_BORDER_PADDING_=100;MarkerManager.MERCATOR_ZOOM_LEVEL_ZERO_RANGE=256;MarkerManager.prototype.resetManager_=function(){var mapWidth=MarkerManager.MERCATOR_ZOOM_LEVEL_ZERO_RANGE;for(var zoom=0;zoom<=this.maxZoom_;++zoom){this.grid_[zoom]={};this.numMarkers_[zoom]=0;this.gridWidth_[zoom]=Math.ceil(mapWidth/this.tileSize_);mapWidth<<=1;}};MarkerManager.prototype.clearMarkers=function(){this.processAll_(this.shownBounds_,this.removeOverlay_);this.resetManager_();};MarkerManager.prototype.getTilePoint_=function(latlng,zoom,padding){var pixelPoint=this.projectionHelper_.LatLngToPixel(latlng,zoom);var point=new google.maps.Point(Math.floor((pixelPoint.x+padding.width)/this.tileSize_),Math.floor((pixelPoint.y+padding.height)/this.tileSize_));return point;};MarkerManager.prototype.addMarkerBatch_=function(marker,minZoom,maxZoom){var me=this;var mPoint=marker.getPosition();marker.MarkerManager_minZoom=minZoom;if(this.trackMarkers_){google.maps.event.addListener(marker,'changed',function(a,b,c){me.onMarkerMoved_(a,b,c);});}
var gridPoint=this.getTilePoint_(mPoint,maxZoom,new google.maps.Size(0,0,0,0));for(var zoom=maxZoom;zoom>=minZoom;zoom--){var cell=this.getGridCellCreate_(gridPoint.x,gridPoint.y,zoom);cell.push(marker);gridPoint.x=gridPoint.x>>1;gridPoint.y=gridPoint.y>>1;}};MarkerManager.prototype.isGridPointVisible_=function(point){var vertical=this.shownBounds_.minY<=point.y&&point.y<=this.shownBounds_.maxY;var minX=this.shownBounds_.minX;var horizontal=minX<=point.x&&point.x<=this.shownBounds_.maxX;if(!horizontal&&minX<0){var width=this.gridWidth_[this.shownBounds_.z];horizontal=minX+width<=point.x&&point.x<=width-1;}
return vertical&&horizontal;};MarkerManager.prototype.onMarkerMoved_=function(marker,oldPoint,newPoint){var zoom=this.maxZoom_;var changed=false;var oldGrid=this.getTilePoint_(oldPoint,zoom,new google.maps.Size(0,0,0,0));var newGrid=this.getTilePoint_(newPoint,zoom,new google.maps.Size(0,0,0,0));while(zoom>=0&&(oldGrid.x!==newGrid.x||oldGrid.y!==newGrid.y)){var cell=this.getGridCellNoCreate_(oldGrid.x,oldGrid.y,zoom);if(cell){if(this.removeFromArray_(cell,marker)){this.getGridCellCreate_(newGrid.x,newGrid.y,zoom).push(marker);}}
if(zoom===this.mapZoom_){if(this.isGridPointVisible_(oldGrid)){if(!this.isGridPointVisible_(newGrid)){this.removeOverlay_(marker);changed=true;}}else{if(this.isGridPointVisible_(newGrid)){this.addOverlay_(marker);changed=true;}}}
oldGrid.x=oldGrid.x>>1;oldGrid.y=oldGrid.y>>1;newGrid.x=newGrid.x>>1;newGrid.y=newGrid.y>>1;--zoom;}
if(changed){this.notifyListeners_();}};MarkerManager.prototype.removeMarker=function(marker){var zoom=this.maxZoom_;var changed=false;var point=marker.getPosition();var grid=this.getTilePoint_(point,zoom,new google.maps.Size(0,0,0,0));while(zoom>=0){var cell=this.getGridCellNoCreate_(grid.x,grid.y,zoom);if(cell){this.removeFromArray_(cell,marker);}
if(zoom===this.mapZoom_){if(this.isGridPointVisible_(grid)){this.removeOverlay_(marker);changed=true;}}
grid.x=grid.x>>1;grid.y=grid.y>>1;--zoom;}
if(changed){this.notifyListeners_();}
this.numMarkers_[marker.MarkerManager_minZoom]--;};MarkerManager.prototype.addMarkers=function(markers,minZoom,opt_maxZoom){var maxZoom=this.getOptMaxZoom_(opt_maxZoom);for(var i=markers.length-1;i>=0;i--){this.addMarkerBatch_(markers[i],minZoom,maxZoom);}
this.numMarkers_[minZoom]+=markers.length;};MarkerManager.prototype.getOptMaxZoom_=function(opt_maxZoom){return opt_maxZoom||this.maxZoom_;};MarkerManager.prototype.getMarkerCount=function(zoom){var total=0;for(var z=0;z<=zoom;z++){total+=this.numMarkers_[z];}
return total;};MarkerManager.prototype.getMarker=function(lat,lng,zoom){var mPoint=new google.maps.LatLng(lat,lng);var gridPoint=this.getTilePoint_(mPoint,zoom,new google.maps.Size(0,0,0,0));var marker=new google.maps.Marker({position:mPoint});var cellArray=this.getGridCellNoCreate_(gridPoint.x,gridPoint.y,zoom);if(cellArray!==undefined){for(var i=0;i<cellArray.length;i++)
{if(lat===cellArray[i].getPosition().lat()&&lng===cellArray[i].getPosition().lng()){marker=cellArray[i];}}}
return marker;};MarkerManager.prototype.addMarker=function(marker,minZoom,opt_maxZoom){var maxZoom=this.getOptMaxZoom_(opt_maxZoom);this.addMarkerBatch_(marker,minZoom,maxZoom);var gridPoint=this.getTilePoint_(marker.getPosition(),this.mapZoom_,new google.maps.Size(0,0,0,0));if(this.isGridPointVisible_(gridPoint)&&minZoom<=this.shownBounds_.z&&this.shownBounds_.z<=maxZoom){this.addOverlay_(marker);this.notifyListeners_();}
this.numMarkers_[minZoom]++;};function GridBounds(bounds){this.minX=Math.min(bounds[0].x,bounds[1].x);this.maxX=Math.max(bounds[0].x,bounds[1].x);this.minY=Math.min(bounds[0].y,bounds[1].y);this.maxY=Math.max(bounds[0].y,bounds[1].y);}
GridBounds.prototype.equals=function(gridBounds){if(this.maxX===gridBounds.maxX&&this.maxY===gridBounds.maxY&&this.minX===gridBounds.minX&&this.minY===gridBounds.minY){return true;}else{return false;}};GridBounds.prototype.containsPoint=function(point){var outer=this;return(outer.minX<=point.x&&outer.maxX>=point.x&&outer.minY<=point.y&&outer.maxY>=point.y);};MarkerManager.prototype.getGridCellCreate_=function(x,y,z){var grid=this.grid_[z];if(x<0){x+=this.gridWidth_[z];}
var gridCol=grid[x];if(!gridCol){gridCol=grid[x]=[];return(gridCol[y]=[]);}
var gridCell=gridCol[y];if(!gridCell){return(gridCol[y]=[]);}
return gridCell;};MarkerManager.prototype.getGridCellNoCreate_=function(x,y,z){var grid=this.grid_[z];if(x<0){x+=this.gridWidth_[z];}
var gridCol=grid[x];return gridCol?gridCol[y]:undefined;};MarkerManager.prototype.getGridBounds_=function(bounds,zoom,swPadding,nePadding){zoom=Math.min(zoom,this.maxZoom_);var bl=bounds.getSouthWest();var tr=bounds.getNorthEast();var sw=this.getTilePoint_(bl,zoom,swPadding);var ne=this.getTilePoint_(tr,zoom,nePadding);var gw=this.gridWidth_[zoom];if(tr.lng()<bl.lng()||ne.x<sw.x){sw.x-=gw;}
if(ne.x-sw.x+1>=gw){sw.x=0;ne.x=gw-1;}
var gridBounds=new GridBounds([sw,ne]);gridBounds.z=zoom;return gridBounds;};MarkerManager.prototype.getMapGridBounds_=function(){return this.getGridBounds_(this.map_.getBounds(),this.mapZoom_,this.swPadding_,this.nePadding_);};MarkerManager.prototype.onMapMoveEnd_=function(){this.objectSetTimeout_(this,this.updateMarkers_,0);};MarkerManager.prototype.objectSetTimeout_=function(object,command,milliseconds){return window.setTimeout(function(){command.call(object);},milliseconds);};MarkerManager.prototype.visible=function(){return this.show_?true:false;};MarkerManager.prototype.isHidden=function(){return!this.show_;};MarkerManager.prototype.show=function(){this.show_=true;this.refresh();};MarkerManager.prototype.hide=function(){this.show_=false;this.refresh();};MarkerManager.prototype.toggle=function(){this.show_=!this.show_;this.refresh();};MarkerManager.prototype.refresh=function(){if(this.shownMarkers_>0){this.processAll_(this.shownBounds_,this.removeOverlay_);}
if(this.show_){this.processAll_(this.shownBounds_,this.addOverlay_);}
this.notifyListeners_();};MarkerManager.prototype.updateMarkers_=function(){this.mapZoom_=this.map_.getZoom();var newBounds=this.getMapGridBounds_();if(newBounds.equals(this.shownBounds_)&&newBounds.z===this.shownBounds_.z){return;}
if(newBounds.z!==this.shownBounds_.z){this.processAll_(this.shownBounds_,this.removeOverlay_);if(this.show_){this.processAll_(newBounds,this.addOverlay_);}}else{this.rectangleDiff_(this.shownBounds_,newBounds,this.removeCellMarkers_);if(this.show_){this.rectangleDiff_(newBounds,this.shownBounds_,this.addCellMarkers_);}}
this.shownBounds_=newBounds;this.notifyListeners_();};MarkerManager.prototype.notifyListeners_=function(){google.maps.event.trigger(this,'changed',this.shownBounds_,this.shownMarkers_);};MarkerManager.prototype.processAll_=function(bounds,callback){for(var x=bounds.minX;x<=bounds.maxX;x++){for(var y=bounds.minY;y<=bounds.maxY;y++){this.processCellMarkers_(x,y,bounds.z,callback);}}};MarkerManager.prototype.processCellMarkers_=function(x,y,z,callback){var cell=this.getGridCellNoCreate_(x,y,z);if(cell){for(var i=cell.length-1;i>=0;i--){callback(cell[i]);}}};MarkerManager.prototype.removeCellMarkers_=function(x,y,z){this.processCellMarkers_(x,y,z,this.removeOverlay_);};MarkerManager.prototype.addCellMarkers_=function(x,y,z){this.processCellMarkers_(x,y,z,this.addOverlay_);};MarkerManager.prototype.rectangleDiff_=function(bounds1,bounds2,callback){var me=this;me.rectangleDiffCoords_(bounds1,bounds2,function(x,y){callback.apply(me,[x,y,bounds1.z]);});};MarkerManager.prototype.rectangleDiffCoords_=function(bounds1,bounds2,callback){var minX1=bounds1.minX;var minY1=bounds1.minY;var maxX1=bounds1.maxX;var maxY1=bounds1.maxY;var minX2=bounds2.minX;var minY2=bounds2.minY;var maxX2=bounds2.maxX;var maxY2=bounds2.maxY;var x,y;for(x=minX1;x<=maxX1;x++){for(y=minY1;y<=maxY1&&y<minY2;y++){callback(x,y);}
for(y=Math.max(maxY2+1,minY1);y<=maxY1;y++){callback(x,y);}}
for(y=Math.max(minY1,minY2);y<=Math.min(maxY1,maxY2);y++){for(x=Math.min(maxX1+1,minX2)-1;x>=minX1;x--){callback(x,y);}
for(x=Math.max(minX1,maxX2+1);x<=maxX1;x++){callback(x,y);}}};MarkerManager.prototype.removeFromArray_=function(array,value,opt_notype){var shift=0;for(var i=0;i<array.length;++i){if(array[i]===value||(opt_notype&&array[i]===value)){array.splice(i--,1);shift++;}}
return shift;};function ProjectionHelperOverlay(map){this.setMap(map);var TILEFACTOR=8;var TILESIDE=1<<TILEFACTOR;var RADIUS=7;this._map=map;this._zoom=-1;this._X0=this._Y0=this._X1=this._Y1=-1;}
ProjectionHelperOverlay.prototype=new google.maps.OverlayView();ProjectionHelperOverlay.prototype.LngToX_=function(lng){return(1+lng/180);};ProjectionHelperOverlay.prototype.LatToY_=function(lat){var sinofphi=Math.sin(lat*Math.PI/180);return(1-0.5/Math.PI*Math.log((1+sinofphi)/(1-sinofphi)));};ProjectionHelperOverlay.prototype.LatLngToPixel=function(latlng,zoom){var map=this._map;var div=this.getProjection().fromLatLngToDivPixel(latlng);var abs={x:~~(0.5+this.LngToX_(latlng.lng())*(2<<(zoom+6))),y:~~(0.5+this.LatToY_(latlng.lat())*(2<<(zoom+6)))};return abs;};ProjectionHelperOverlay.prototype.draw=function(){if(!this.ready){this.ready=true;google.maps.event.trigger(this,'ready');}};;

/****** FILE: themes/v3/js/map.js *****/

var coords;var geocode;var map;var mgr;var netmkr;var mapcenter;var markers=[];var homemarker=[];var districtmarker=[];var currentcenter='';var savedMarkers=[];var savedMarkerType=[];var savedInfoWindows=[];var activemarker=[];var activeinfowin=[];var activenetwork;var iconsize=new google.maps.Size(64,33);var iconscale=new google.maps.Size(40,24);var icondot=new google.maps.Size(16,14);var iconorigin=google.maps.Point(0,0);var iconanchor=google.maps.Point(0,0);var goldicon=new google.maps.MarkerImage('assets/icons/icons/goldcam.png',iconsize,iconorigin,iconanchor,iconscale);var blueicon=new google.maps.MarkerImage('assets/icons/icons/bluecam.png',iconsize,iconorigin,iconanchor,iconscale);var doticon=new google.maps.MarkerImage('assets/icons/icons/bluecam.png',icondot,iconorigin,iconanchor,icondot);var shadowimage=new google.maps.MarkerImage('assets/icons/icons/shadow.png',new google.maps.Size(123,75),new google.maps.Point(0,0),new google.maps.Point(0,0),new google.maps.Size(40,37));var camrStyles=[{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"on"},{gamma:2.39},{hue:"#004cff"},{lightness:-49}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:60}]},{featureType:"road.local",elementType:"all",stylers:[]},{featureType:"poi.school",elementType:"all",stylers:[{invert_lightness:false},{lightness:24}]},{featureType:"poi.medical",elementType:"all",stylers:[{invert_lightness:false},{lightness:46}]},{featureType:"poi.park",elementType:"all",stylers:[{invert_lightness:false},{lightness:22}]},{featureType:"transit.station",elementType:"all",stylers:[{visibility:"on"},{gamma:0.59}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{gamma:0.51}]},{featureType:"all",elementType:"all",stylers:[]},{featureType:"all",elementType:"all",stylers:[]}];$(document).ready(function(){var maptypeoptions={mapTypeIds:[google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.ROADMAP]};var navoptions={style:google.maps.NavigationControlStyle.LARGE,mapTypeIds:[google.maps.MapTypeId.SATELLITE,'camrmap']};var pegman=true;var myOptions={zoom:11,mapTypeId:'camrmap',scrollwheel:false,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.HYBRID,'camrmap']},navigationControlOptions:navoptions};map=new google.maps.Map(document.getElementById("googlemaps"),myOptions);map.setTilt(45);map.setHeading(90);google.maps.event.addListener(map,'zoom_changed',function(){var curzoom=map.getZoom();if(curzoom>=18)districtsLayer.setOptions({query:{select:'Boundaries',from:'2103550',where:"dNumber = 88"},styles:[{polygonOptions:{fillColor:"#3D6283",strokeColor:"#3D6283",strokeOpacity:"0.7",strokeWeight:"int",fillOpacity:"0.05"}}]});});var styledMapOptions={name:"Map"}
var camrMapType=new google.maps.StyledMapType(camrStyles,styledMapOptions);map.mapTypes.set('camrmap',camrMapType);var mgrOptions={trackMarkers:true}
mgr=new MarkerManager(map,mgrOptions);google.maps.event.addListener(mgr,'loaded',function(){});$('.district-link a').on('click',function(){var info=$(this).attr('rel').split(":");var district=info[0];kmlid=info[2];var dinfo=$('#district_'+district).clone().show();$("#district-menu").html(dinfo);geocoder.geocode({'address':info[1]+", Philly, PA"},function(results,status){map.setCenter(results[0].geometry.location);districtmarker.setPosition(results[0].geometry.location);districtmarker.setVisible(true);districtmarker.setMap(map);var infowindow=new google.maps.InfoWindow({content:"<p>"+info[3]+" Headquarters</p>"+info[1]});google.maps.event.addListener(districtmarker,'click',function(){infowindow.open(map,districtmarker);});var pos=new google.maps.LatLng(results[0].geometry.location);districtsLayer.setOptions({query:{select:'PSABoundaries',from:'2103550',where:"dNumber ="+info[0]},styles:[{polygonOptions:{strokeColor:"#3D6283",strokeOpacity:"0.7",strokeWeight:"int",fillOpacity:"0.1"}}]});var curzoom=map.getZoom();if(curzoom<13)map.setZoom(13);});var dmenu="#district-menu";return false;});$('#use-location').bind('click',function(e){e.preventDefault();if(navigator.geolocation){$('#location-option i.icon-loading').show();navigator.geolocation.getCurrentPosition(geoLocationSuccess,geoLocationFailed);}else{$('#location-option i.icon-loading').hide();alert('Your browser does not support geo-location detection.');}});function geoLocationSuccess(position){console.log(position)
currentLocation=position.coords;$('#current-location-display').show();if(currentLocation.accuracy>=5000){$('#current-location-display span').text('Sorry, we are unable to determine your location at this time. :(');}else{var $googleMap=$('.google-map-full');var currHeight=$googleMap.height();var nextHeight=currHeight===300?450:450;$googleMap.css('height',nextHeight+'px');$('html, body').animate({scrollTop:$("#googlemaps-container-top").offset().top},1000);$('#current-location-display p').text('Note: Location is Approximate.');var loc=new google.maps.LatLng(currentLocation.latitude,currentLocation.longitude);homemarker.setPosition(loc);homemarker.setVisible(true);homemarker.setMap(map);currentcenter='('+currentLocation.latitude+','+currentLocation.longitude+')';$("#latlng").val(currentcenter);map.setCenter(loc);var form=$('#search-form');$.get(form.attr("action")+"?latlng="+currentcenter,function(data){var dInfo=data.split('.');var districtdiv=$("#district_"+dInfo[0]).html();var curdistrict=$('#d_'+dInfo[0]+' a').attr('rel').split(":");var curdistaddy=curdistrict[1];geocoder.geocode({'address':curdistaddy+", Philly, PA"},function(results,status){districtmarker.setPosition(results[0].geometry.location);districtmarker.setVisible(true);districtmarker.setMap(map);});$("#district-menu").html(districtdiv);districtsLayer.setOptions({query:{select:'PSABoundaries',from:'2103550',where:"dNumber = "+dInfo[0]},styles:[{polygonOptions:{strokeColor:"#3D6283",strokeOpacity:"0.7",strokeWeight:"int",fillOpacity:"0.1"}}]});var info=$('#district_'+dInfo[0]).clone().show();$("#district-menu").html(info);});var curzoom=map.getZoom();if(curzoom<15)map.setZoom(15);}
$('#location-option i.icon-loading').hide();}
function geoLocationFailed(){alert('Unable to detect your current location.');$('#location-option i.icon-loading').hide();}
function updateStreetAddress(address){$('#street-address').val(address);}
$('#cancel-current-location').bind('click',cancelCurrentLocationDisplay);function cancelCurrentLocationDisplay(){$('#current-location-display').hide();$('#location-option').show();$('#street-address').show();currentLocation=null;}});;

/****** FILE: themes/v3/js/districts-map.js *****/

var homeimage=new google.maps.MarkerImage('assets/map/icons/home.png',new google.maps.Size(26,40),new google.maps.Point(0,0),new google.maps.Point(13,40));var shadowimage=new google.maps.MarkerImage('assets/icons/icons/homeshadow.png',new google.maps.Size(50,40),new google.maps.Point(0,0),new google.maps.Point(13,40));var shieldimage=new google.maps.MarkerImage('assets/map/icons/icon-map-badge.png',new google.maps.Size(116,128),new google.maps.Point(0,0),new google.maps.Point(24,29),new google.maps.Size(58,64));var districtsArray=[];geocoder=new google.maps.Geocoder();var districtsLayer=new google.maps.FusionTablesLayer({query:{select:'PSABoundaries',from:'1WUv2b8hhZo-oyG0tau0cMmOcLRWC1AlxhBdtUv8',where:"dNumber > 0"},styles:[{polygonOptions:{strokeColor:"#3D6283",strokeOpacity:"0.7",strokeWeight:"int",fillOpacity:"0.3"}}]});$(document).ready(function(){geocoder.geocode({'address':'Philadelphia, Pa'},function(results,status){if(status==google.maps.GeocoderStatus.OK){$mapcenter=results[0].geometry.location;districtmarker=new google.maps.Marker({position:$mapcenter,title:"District HQ",icon:shieldimage});districtmarker.setDraggable(false);districtsLayer.setMap(map);var pos=new google.maps.LatLng($mapcenter);homemarker=new google.maps.Marker({position:$mapcenter,title:"Current Location"});homemarker.setDraggable(false);homemarker.setMap(map);map.setCenter(results[0].geometry.location);}});});$('#search-form').submit(function(e){var form=$(this);var addy=$("#search-address-box").val();var dmenu="#district-menu";var $googleMap=$('.google-map-full');var currHeight=$googleMap.height();var nextHeight=currHeight===300?450:450;$googleMap.css('height',nextHeight+'px');$('html, body').animate({scrollTop:$("#googlemaps-container-top").offset().top},1000);geocoder.geocode({'address':addy+'Philadelphia, Pa'},function(results,status){homemarker.setPosition(results[0].geometry.location);homemarker.setVisible(true);homemarker.setMap(map);if(status==google.maps.GeocoderStatus.OK){currentcenter=results[0].geometry.location.toString();$("#latlng").val(currentcenter);map.setCenter(results[0].geometry.location);$.get(form.attr("action")+"?latlng="+currentcenter,function(data){var dInfo=data.split('.');var districtdiv=$("#district_"+dInfo[0]).html();var curdistrict=$('#d_'+dInfo[0]+' a').attr('rel').split(":");var curdistaddy=curdistrict[1];var infowindow=new google.maps.InfoWindow({content:"<p>"+dInfo[0]+" Head Quarters</p>"+curdistrict[1]});google.maps.event.addListener(districtmarker,'click',function(){infowindow.open(map,districtmarker);});geocoder.geocode({'address':curdistaddy+", Philly, PA"},function(results,status){districtmarker.setPosition(results[0].geometry.location);districtmarker.setVisible(true);districtmarker.setMap(map);});$("#district-menu").html(districtdiv);districtsLayer.setOptions({query:{select:'PSABoundaries',from:'2103550',where:"dNumber = "+dInfo[0]},styles:[{polygonOptions:{strokeColor:"#3D6283",strokeOpacity:"0.7",strokeWeight:"int",fillOpacity:"0.1"}}]});var info=$('#district_'+dInfo[0]).clone().show();$("#district-menu").html(info);});var curzoom=map.getZoom();if(curzoom<15)map.setZoom(15);}else{$(dmenu).html("<h3>Invalid Address.</h3>");}});if(!e.isDefaultPrevented()){e.preventDefault();}});;

/****** FILE: themes/v3/js/searchoverlay.js *****/

sWait=setTimeout(function(){},700);$(document).ready(function(){var $hiddenSearch=$("#hidden-search"),$displaySearch=$("#display-search"),$searchOverlay=$("#search-overlay"),$resultList=$("#result-list");$(".icon-search").click(function(){$searchOverlay.show();$hiddenSearch.focus();return false;});function closeOverlay(){var overlay=document.getElementById('search-overlay');$hiddenSearch.blur();$(overlay).animate({"opacity":0},500,function(){$(overlay).hide().css("opacity",1);});}
$searchOverlay.click(function(event){$hiddenSearch.focus();if(event.target.id=="search-overlay"||event.target.id=="search-overlay-close"){closeOverlay();}});$hiddenSearch.keydown(function(e){window.clearTimeout(sWait);currentQuery=$displaySearch.val();if(e.keyCode==27){closeOverlay();}
if(e.keyCode==8){latestQuery=currentQuery.substring(0,currentQuery.length-1);$displaySearch.val(latestQuery);startCount=1;updateResults(latestQuery);}else if(e.keyCode==32||(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)){latestQuery=currentQuery+String.fromCharCode(e.keyCode);$displaySearch.val(latestQuery);}else if(e.keyCode==13){startCount=1;}
sWait=setTimeout(function(){updateResults(latestQuery);startCount=1;},700);});function processResult(data){if(data.length>0){if(startCount==1){$resultList.html('');$('#result-list').siblings('a').remove(":contains('Load More')");}
data=$.parseJSON(data);$("#result-list li").remove(":contains('No results')");$("#search-overlay-results").show();previousTerms=new Array();$("#result-list li").each(function(){previousTerms.push($(this).text());});keepTerms=new Array();for(term in data){url=data[term];for(key in url){if(key=="title"){var title=url[key];}else if(key=="link"){var uri=url[key];}else if(key=="snippet"){var snippet=url[key];}}
if($.inArray(term,previousTerms)===-1){$resultList.append('<li><a href="'+uri+'" title="'+title+'">'+title+'</a></li>');$resultList.append('<p>'+snippet+'</p></li>');}else{keepTerms.push(term);}}
if((keepTerms.length==0&&(previousTerms.length!=0||$displaySearch.val()==""))){console.log(keepTerms.length)
console.log(previousTerms.length)}else{for(term in previousTerms){if($.inArray(previousTerms[term],keepTerms)===-1){$("#artists li").filter(function(){return $(this).text()==previousTerms[term]}).remove();}}}
if(startCount==1){var a=$(document.createElement('a')).text('Load More').on('click',function(e){e.preventDefault();startCount=startCount+10;loadMore(latestQuery);return false;});$resultList.parent().append(a);}}else{$resultList.html('');$('#result-list').siblings('a').remove(":contains('Load More')");}}
function updateResults(latestQuery){if(latestQuery.length>0){$.post("home/search",{latestQuery:latestQuery},function(data){processResult(data);});}else{$resultList.html("<li>No results</li>");$('#result-list').siblings('a').remove(":contains('Load More')");}}
function loadMore(latestQuery,start){console.log(startCount)
$.post("home/search",{latestQuery:latestQuery,start:startCount},function(data){processResult(data);});}});;

